:javascript
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);

  function drawChart() {
      //var data = google.visualization.arrayToDataTable(#{raw @count_array.to_json});
      var data = new google.visualization.DataTable();

      data.addColumn('date', 'Date');
      data.addColumn('number', '# of reviews',{role: 'annotation'}  );

       js_data =#{@count_array.to_json};

      for(var i=0; i< js_data.length; i++){
        js_data[i][0] = new Date(js_data[i][0]*1000);
      }
        console.log(js_data);
      data.addRows(js_data);

      var options = {
          pointSize: 5,
          vAxis: {format:'#',
                    viewWindow:{
                      max:10,
                      min:0
                    }
                  }
      };

      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
  }

.sidebar
  = render :partial => 'sidebar'
#container.row-fluid
  .span9.analytics
    = render :partial => 'subheading', :locals => {:heading => 'Overview'}

    #reviews_score.row-fluid
      .btn-group{"data-toggle" => "buttons-checkbox"}
        - ['restaurant','service','food'].each do |category|
          .rating-box
            .score=@reviews_score.category_score(category).round(1)
            .category= category.humanize
        .rating-box
          .score= @reviews_score.dish_score.round(1)
          .category Dishes

    %h4 Overall Rating Trend
    #chart_div

    %h4 Frequently Rated Dishes
    - @trending_dishes.each do |k,v|
      .span3.dish
        .name=k.upcase
        .rating#r{id: v[1].to_i}
          =v[1]

